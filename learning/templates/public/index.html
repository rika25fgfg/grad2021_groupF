{% load static %}
{% load md5url %}
<!DOCTYPE html>
<html>

<head>
  <title>問題ページ</title>
</head>

<body>

  <div id="blocklyDiv" style="height: 500px; width: 750px; float: left;"></div>
  <xml id="toolbox" style="display: none">
    <block type="controls_repeat"></block>
    <block type="text"></block>
    <block type="text_print"></block>
    <block type="go_left"></block>
    <block type="go_right"></block>
    <block type="go_up"></block>
    <block type="go_down"></block>
    <block type="test"></block>
    <block type="controls_whileuntil"></block>


  </xml>
  <div class = "question">
    <h4>&nbsp;&nbsp;&nbsp;「for文のプログラムです。」を10回表示するブロックを作成しなさい。</h4>
    <br>
    <h4>&nbsp;&nbsp;&nbsp;「あいうえお」と表示するブロックを作成しなさい。</h4>
    <br>
    <h4>&nbsp;&nbsp;&nbsp;</h4>

</div>

  <button id="showCode">JavaScriptを表示する</button>
  <script>
    var demoWorkspace = Blockly.inject('blocklyDiv',
      {
        media: 'blockly/media/',
        toolbox: document.getElementById('toolbox')
      });

    function genJavaScript() {
      Blockly.JavaScript.INFINITE_LOOP_TRAP = null;
      var code = Blockly.JavaScript.WorkspaceToCode(demoWorkspace);
      eval(code);
    }

    // アラート表示
    function runJavaScript(event) {
      Blockly.JavaScript.addReservedWords('code');
      var code = Blockly.JavaScript.workspaceToCode(demoWorkspace);
      try {
        eval(code);
      } catch (e) {
        alert(e);
      }
    }
  </script>
  
  <p><button onclick="runJavaScript(event)">実行</button></p>
  <pre id='jsCode'></pre>


  <script src="{% static 'js/google-blockly/blockly_compressed.js' %}"></script>
  <script src="{% static 'js/google-blockly/blocks_compressed.js' %}"></script>
  <script src="{% static 'js/google-blockly/javascript_compressed.js' %}"></script>
  <script src="{% static 'js/google-blockly/msg/js/ja.js' %}"></script>

  <!--<script src="lib/js-interpreter/acorn_interpreter.js"></script>-->
  <!-- <script src="{% static 'js/number1.js' %}"></script> -->
  <script src="{% static 'js/mycode.js' %}"></script>
  <script src="{% static 'js/index.js' %}"></script>

</body>

<style>
  .question{
    float: left;
  }

  p{
    position: absolute;
    bottom: 10px;
    left: 10px;
  }
  #showCode{
    position: absolute;
    bottom: 25px;
    left: 70px;

  }

  #jsCode {
    position: absolute;
    bottom: 50px;
    left: 50px;
  }
</style>

</html>